<style>
  .image-card {
  border-radius: 12px;
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.image-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}

.image-card .img-wrapper {
  width: 100%;
  height: 180px;              /* ƒê·∫∑t chi·ªÅu cao ƒë·ªìng ƒë·ªÅu */
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8f9fa;
}

.image-card .img-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;          /* C·∫Øt ·∫£nh v·ª´a khung */
  transition: transform 0.3s ease;
}

.image-card:hover .img-wrapper img {
  transform: scale(1.05);
}

.image-card .card-body {
  padding: 0.75rem;
}

.image-card .btn {
  border-radius: 20px;
  transition: all 0.2s;
}

.image-card .btn:hover {
  background-color: #dc3545;
  color: #fff;
  transform: scale(1.05);
}

</style>
<div class="my-card container py-4">
  <h2 class="mb-4 text-center">üì∏ Image Manager</h2>

  <form action="/admin/image/upload" method="POST" enctype="multipart/form-data" class="mb-4">
    <div class="input-group">
      <input type="file" name="image" class="form-control" required>
      <button class="btn btn-primary" type="submit">Upload</button>
    </div>
  </form>

  <div class="row g-4">
    <% if (files.length === 0) { %>
      <p class="text-center text-muted">No images found.</p>
    <% } else { %>
      <% files.forEach(file => { %>
        <div class="col-6 col-md-3">
          <div class="card image-card shadow-sm border-0">
            <div class="img-wrapper">
              <img src="<%= file.path %>" alt="<%= file.name %>" />
            </div>
            <div class="card-body text-center">
              <a href="/admin/image/delete/<%= file.name %>" class="btn btn-outline-danger btn-sm w-75">
                <i class="fa fa-trash"></i> Delete
              </a>
            </div>
          </div>
        </div>
      <% }) %>
    <% } %>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const thumbs = document.querySelectorAll(".image-thumb");
  const input = document.getElementById("imageName");
  const preview = document.getElementById("previewImage");
  const previewContainer = document.getElementById("previewContainer");

  thumbs.forEach(thumb => {
    thumb.addEventListener("click", () => {
      // B·ªè ch·ªçn c≈©
      thumbs.forEach(t => t.classList.remove("selected"));
      thumb.classList.add("selected");

      // L·∫•y t√™n file
      const name = thumb.dataset.name;
      input.value = name;

      // Hi·ªÉn th·ªã preview
      preview.src = `/uploads/${name}`;
      previewContainer.style.display = "block";

      // ƒê√≥ng modal sau 300ms (cho m∆∞·ª£t)
      setTimeout(() => {
        const modal = bootstrap.Modal.getInstance(document.getElementById("imageModal"));
        modal.hide();
      }, 300);
    });
  });
});
</script>

